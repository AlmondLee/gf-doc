
[TOC]

# 基本介绍

`gf`框架的`ORM`模块由`gdb`模块实现，最大的特色在于底层默认使用了`map`数据类型作为基础的数据表记录载体，而非使用`struct`，开发者无需预先定义数据表记录`struct`便可直接对数据表记录执行各种操作。这样的设计赋予了开发者更高的灵活度和简便性，当然`gdb`也支持`数据表记录`与`struct`的映射转换，详细介绍请查看后续【[ORM高级特性](database/gdb/senior.md)】章节。

> `gdb`数据库引擎底层采用了**链接池设计**，当链接不再使用时会自动关闭，因此链接对象不用的时候不需要显示使用`Close`方法关闭数据库连接。这也是`gdb`数据库模块人性化设计的地方，方便开发者使用数据库而无需手动维护大量的数据库链接对象。

**注意：为提高数据库操作安全性，在ORM操作中不建议直接将参数拼接成SQL执行，又或者将参数拼接称字符串执行，建议尽量使用预处理的方式（充分使用```?```占位符）来传递SQL参数。**

接口文档：
https://godoc.org/github.com/gogf/gf/g/database/gdb

# 数据结构

为便于数据表记录的操作，ORM定义了5种基本的数据类型：

```go
type Map         map[string]interface{} // 数据记录
type List        []Map                  // 数据记录列表

type Value       []byte                 // 返回数据表记录值
type Record      map[string]Value       // 返回数据表记录键值对
type Result      []Record               // 返回数据表记录列表
```

1. ```Map```与```List```用于ORM操作过程中的输入参数类型（与全局类型```g.Map```和```g.List```一致，在项目开发中常用`g.Map`和`g.List`替换）；
2. ```Value/Record/Result```用于ORM操作的结果数据类型，具体说明请查看【[ORM结果处理](database/gdb/result.md)】章节；


# 使用`g.Database/g.DB`与`gdb.New`的区别

获取数据库操作对象有两种方式，一种是使用`g.Database/g.DB`方法，一种是使用原生`gdb.New`方法，而前面一种是推荐的使用方式。这两种方式的区别如下：
1. 使用`g.*`对象管理方式获取的是单例对象，而`gdb.New`是创建一个新的数据库对象(往往需要自行进行单例管理)；
1. 使用`g.*`整合了配置文件的管理对接(支持配置文件热更新)，而`gdb.New`无法使用配置文件，必须开发者自行解析随后调用`gdb`的配置管理方法进行配置；
1. 其他使用无差别；
