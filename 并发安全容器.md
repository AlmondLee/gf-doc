
[TOC]

.

>[danger] # glist

并发安全双向列表，常用方法列表如下：
```go
type SafeList
    func NewSafeList() *SafeList
    func (this *SafeList) Back() *list.Element
    func (this *SafeList) BackAll() []interface{}
    func (this *SafeList) BackItem() interface{}
    func (this *SafeList) BatchPopBack(max int) []interface{}
    func (this *SafeList) BatchPopFront(max int) []interface{}
    func (this *SafeList) BatchPushFront(vs []interface{})
    func (this *SafeList) Front() *list.Element
    func (this *SafeList) FrontAll() []interface{}
    func (this *SafeList) FrontItem() interface{}
    func (this *SafeList) InsertAfter(v interface{}, mark *list.Element) *list.Element
    func (this *SafeList) InsertBefore(v interface{}, mark *list.Element) *list.Element
    func (this *SafeList) Len() int
    func (this *SafeList) PopBack() interface{}
    func (this *SafeList) PopBackAll() []interface{}
    func (this *SafeList) PopFront() interface{}
    func (this *SafeList) PopFrontAll() []interface{}
    func (this *SafeList) PushBack(v interface{}) *list.Element
    func (this *SafeList) PushFront(v interface{}) *list.Element
    func (this *SafeList) Remove(e *list.Element) interface{}
    func (this *SafeList) RemoveAll()
```

>[danger] # gmap

并发安全Map，常用方法列表如下：
```go
type IntBoolMap
    func NewIntBoolMap() *IntBoolMap
    func (this *IntBoolMap) BatchRemove(keys []int)
    func (this *IntBoolMap) BatchSet(m map[int]bool)
    func (this *IntBoolMap) Clear()
    func (this *IntBoolMap) Clone() *map[int]bool
    func (this *IntBoolMap) Contains(key int) bool
    func (this *IntBoolMap) Get(key int) bool
    func (this *IntBoolMap) GetAndRemove(key int) bool
    func (this *IntBoolMap) IsEmpty() bool
    func (this *IntBoolMap) Keys() []int
    func (this *IntBoolMap) Remove(key int)
    func (this *IntBoolMap) Set(key int, val bool)
    func (this *IntBoolMap) Size() int
type IntIntMap
    func NewIntIntMap() *IntIntMap
    func (this *IntIntMap) BatchRemove(keys []int)
    func (this *IntIntMap) BatchSet(m map[int]int)
    func (this *IntIntMap) Clear()
    func (this *IntIntMap) Clone() *map[int]int
    func (this *IntIntMap) Contains(key int) bool
    func (this *IntIntMap) Get(key int) int
    func (this *IntIntMap) GetAndRemove(key int) int
    func (this *IntIntMap) IsEmpty() bool
    func (this *IntIntMap) Keys() []int
    func (this *IntIntMap) Remove(key int)
    func (this *IntIntMap) Set(key int, val int)
    func (this *IntIntMap) Size() int
    func (this *IntIntMap) Values() []int
type IntInterfaceMap
    func NewIntInterfaceMap() *IntInterfaceMap
    func (this *IntInterfaceMap) BatchRemove(keys []int)
    func (this *IntInterfaceMap) BatchSet(m map[int]interface{})
    func (this *IntInterfaceMap) Clear()
    func (this *IntInterfaceMap) Clone() *map[int]interface{}
    func (this *IntInterfaceMap) Contains(key int) bool
    func (this *IntInterfaceMap) Get(key int) interface{}
    func (this *IntInterfaceMap) GetAndRemove(key int) interface{}
    func (this *IntInterfaceMap) GetBool(key int) bool
    func (this *IntInterfaceMap) GetFloat32(key int) float32
    func (this *IntInterfaceMap) GetFloat64(key int) float64
    func (this *IntInterfaceMap) GetInt(key int) int
    func (this *IntInterfaceMap) GetString(key int) string
    func (this *IntInterfaceMap) GetUint(key int) uint
    func (this *IntInterfaceMap) IsEmpty() bool
    func (this *IntInterfaceMap) Keys() []int
    func (this *IntInterfaceMap) Remove(key int)
    func (this *IntInterfaceMap) Set(key int, val interface{})
    func (this *IntInterfaceMap) Size() int
    func (this *IntInterfaceMap) Values() []interface{}
type IntStringMap
    func NewIntStringMap() *IntStringMap
    func (this *IntStringMap) BatchRemove(keys []int)
    func (this *IntStringMap) BatchSet(m map[int]string)
    func (this *IntStringMap) Clear()
    func (this *IntStringMap) Clone() *map[int]string
    func (this *IntStringMap) Contains(key int) bool
    func (this *IntStringMap) Get(key int) string
    func (this *IntStringMap) GetAndRemove(key int) string
    func (this *IntStringMap) IsEmpty() bool
    func (this *IntStringMap) Keys() []int
    func (this *IntStringMap) Remove(key int)
    func (this *IntStringMap) Set(key int, val string)
    func (this *IntStringMap) Size() int
    func (this *IntStringMap) Values() []string
type InterfaceInterfaceMap
    func NewInterfaceInterfaceMap() *InterfaceInterfaceMap
    func (this *InterfaceInterfaceMap) BatchRemove(keys []interface{})
    func (this *InterfaceInterfaceMap) BatchSet(m map[interface{}]interface{})
    func (this *InterfaceInterfaceMap) Clear()
    func (this *InterfaceInterfaceMap) Clone() *map[interface{}]interface{}
    func (this *InterfaceInterfaceMap) Contains(key interface{}) bool
    func (this *InterfaceInterfaceMap) Get(key interface{}) interface{}
    func (this *InterfaceInterfaceMap) GetAndRemove(key interface{}) interface{}
    func (this *InterfaceInterfaceMap) GetBool(key interface{}) bool
    func (this *InterfaceInterfaceMap) GetFloat32(key interface{}) float32
    func (this *InterfaceInterfaceMap) GetFloat64(key interface{}) float64
    func (this *InterfaceInterfaceMap) GetInt(key interface{}) int
    func (this *InterfaceInterfaceMap) GetString(key interface{}) string
    func (this *InterfaceInterfaceMap) GetUint(key interface{}) uint
    func (this *InterfaceInterfaceMap) IsEmpty() bool
    func (this *InterfaceInterfaceMap) Keys() []interface{}
    func (this *InterfaceInterfaceMap) Remove(key interface{})
    func (this *InterfaceInterfaceMap) Set(key interface{}, val interface{})
    func (this *InterfaceInterfaceMap) Size() int
    func (this *InterfaceInterfaceMap) Values() []interface{}
type StringBoolMap
    func NewStringBoolMap() *StringBoolMap
    func (this *StringBoolMap) BatchRemove(keys []string)
    func (this *StringBoolMap) BatchSet(m map[string]bool)
    func (this *StringBoolMap) Clear()
    func (this *StringBoolMap) Clone() *map[string]bool
    func (this *StringBoolMap) Contains(key string) bool
    func (this *StringBoolMap) Get(key string) bool
    func (this *StringBoolMap) GetAndRemove(key string) bool
    func (this *StringBoolMap) IsEmpty() bool
    func (this *StringBoolMap) Keys() []string
    func (this *StringBoolMap) Remove(key string)
    func (this *StringBoolMap) Set(key string, val bool)
    func (this *StringBoolMap) Size() int
type StringIntMap
    func NewStringIntMap() *StringIntMap
    func (this *StringIntMap) BatchRemove(keys []string)
    func (this *StringIntMap) BatchSet(m map[string]int)
    func (this *StringIntMap) Clear()
    func (this *StringIntMap) Clone() *map[string]int
    func (this *StringIntMap) Contains(key string) bool
    func (this *StringIntMap) Get(key string) int
    func (this *StringIntMap) GetAndRemove(key string) int
    func (this *StringIntMap) IsEmpty() bool
    func (this *StringIntMap) Keys() []string
    func (this *StringIntMap) Remove(key string)
    func (this *StringIntMap) Set(key string, val int)
    func (this *StringIntMap) Size() int
    func (this *StringIntMap) Values() []int
type StringInterfaceMap
    func NewStringInterfaceMap() *StringInterfaceMap
    func (this *StringInterfaceMap) BatchRemove(keys []string)
    func (this *StringInterfaceMap) BatchSet(m map[string]interface{})
    func (this *StringInterfaceMap) Clear()
    func (this *StringInterfaceMap) Clone() *map[string]interface{}
    func (this *StringInterfaceMap) Contains(key string) bool
    func (this *StringInterfaceMap) Get(key string) interface{}
    func (this *StringInterfaceMap) GetAndRemove(key string) interface{}
    func (this *StringInterfaceMap) GetBool(key string) bool
    func (this *StringInterfaceMap) GetFloat32(key string) float32
    func (this *StringInterfaceMap) GetFloat64(key string) float64
    func (this *StringInterfaceMap) GetInt(key string) int
    func (this *StringInterfaceMap) GetString(key string) string
    func (this *StringInterfaceMap) GetUint(key string) uint
    func (this *StringInterfaceMap) IsEmpty() bool
    func (this *StringInterfaceMap) Keys() []string
    func (this *StringInterfaceMap) Remove(key string)
    func (this *StringInterfaceMap) Set(key string, val interface{})
    func (this *StringInterfaceMap) Size() int
    func (this *StringInterfaceMap) Values() []interface{}
type StringStringMap
    func NewStringStringMap() *StringStringMap
    func (this *StringStringMap) BatchRemove(keys []string)
    func (this *StringStringMap) BatchSet(m map[string]string)
    func (this *StringStringMap) Clear()
    func (this *StringStringMap) Clone() *map[string]string
    func (this *StringStringMap) Contains(key string) bool
    func (this *StringStringMap) Get(key string) string
    func (this *StringStringMap) GetAndRemove(key string) string
    func (this *StringStringMap) IsEmpty() bool
    func (this *StringStringMap) Keys() []string
    func (this *StringStringMap) Remove(key string)
    func (this *StringStringMap) Set(key string, val string)
    func (this *StringStringMap) Size() int
    func (this *StringStringMap) Values() []string
type UintInterfaceMap
    func NewUintInterfaceMap() *UintInterfaceMap
    func (this *UintInterfaceMap) BatchRemove(keys []uint)
    func (this *UintInterfaceMap) BatchSet(m map[uint]interface{})
    func (this *UintInterfaceMap) Clear()
    func (this *UintInterfaceMap) Clone() *map[uint]interface{}
    func (this *UintInterfaceMap) Contains(key uint) bool
    func (this *UintInterfaceMap) Get(key uint) interface{}
    func (this *UintInterfaceMap) GetAndRemove(key uint) interface{}
    func (this *UintInterfaceMap) GetBool(key uint) bool
    func (this *UintInterfaceMap) GetFloat32(key uint) float32
    func (this *UintInterfaceMap) GetFloat64(key uint) float64
    func (this *UintInterfaceMap) GetInt(key uint) int
    func (this *UintInterfaceMap) GetString(key uint) string
    func (this *UintInterfaceMap) GetUint(key uint) uint
    func (this *UintInterfaceMap) IsEmpty() bool
    func (this *UintInterfaceMap) Keys() []uint
    func (this *UintInterfaceMap) Remove(key uint)
    func (this *UintInterfaceMap) Set(key uint, val interface{})
    func (this *UintInterfaceMap) Size() int
    func (this *UintInterfaceMap) Values() []interface{}
```



>[danger] # gset

并发安全Set，常用方法列表如下：
```go
type IntSet
    func NewIntSet() *IntSet
    func (this *IntSet) Add(item int) *IntSet
    func (this *IntSet) BatchAdd(items []int) *IntSet
    func (this *IntSet) Clear()
    func (this *IntSet) Contains(item int) bool
    func (this *IntSet) Iterator(f func(v int))
    func (this *IntSet) Remove(key int)
    func (this *IntSet) Size() int
    func (this *IntSet) Slice() []int
    func (this *IntSet) String() string
type InterfaceSet
    func NewInterfaceSet() *InterfaceSet
    func (this *InterfaceSet) Add(item interface{}) *InterfaceSet
    func (this *InterfaceSet) BatchAdd(items []interface{}) *InterfaceSet
    func (this *InterfaceSet) Clear()
    func (this *InterfaceSet) Contains(item interface{}) bool
    func (this *InterfaceSet) Iterator(f func(v interface{}))
    func (this *InterfaceSet) Remove(key interface{})
    func (this *InterfaceSet) Size() int
    func (this *InterfaceSet) Slice() []interface{}
    func (this *InterfaceSet) String() string
type StringSet
    func NewStringSet() *StringSet
    func (this *StringSet) Add(item string) *StringSet
    func (this *StringSet) BatchAdd(items []string) *StringSet
    func (this *StringSet) Clear()
    func (this *StringSet) Contains(item string) bool
    func (this *StringSet) Iterator(f func(v string))
    func (this *StringSet) Remove(key string)
    func (this *StringSet) Size() int
    func (this *StringSet) Slice() []string
    func (this *StringSet) String() string
```


>[danger] # gqueue

动态大小的并发安全队列.
```go
type IntQueue
    func NewIntQueue() *IntQueue
    func (q *IntQueue) Pop() int
    func (q *IntQueue) Push(v int)
    func (q *IntQueue) Size() int
type InterfaceQueue
    func NewInterfaceQueue() *InterfaceQueue
    func (q *InterfaceQueue) Pop() interface{}
    func (q *InterfaceQueue) Push(v interface{})
    func (q *InterfaceQueue) Size() int
type StringQueue
    func NewStringQueue() *StringQueue
    func (q *StringQueue) Pop() string
    func (q *StringQueue) Push(v string)
    func (q *StringQueue) Size() int
type UintQueue
    func NewUintQueue() *UintQueue
    func (q *UintQueue) Pop() uint
    func (q *UintQueue) Push(v uint)
    func (q *UintQueue) Size() int
```
gqueue与原生channel的性能测试：
```
john@johnstation:~/Workspace/Go/GOPATH/src/gitee.com/johng/gf/g/container/gqueue$ go test *.go -bench=".*"
goos: linux
goarch: amd64
BenchmarkGqueueNew1000W-8      	10000000	       131 ns/op
BenchmarkChannelNew1000W-8     	     200	   5886021 ns/op
BenchmarkGqueuePush-8          	10000000	       128 ns/op
BenchmarkGqueuePushAndPop-8    	20000000	       111 ns/op
BenchmarkChannelPushAndPop-8   	50000000	      39.3 ns/op
PASS
ok  	command-line-arguments	15.667s
```
可以看到原生的channel的读写性能是非常高的，但是创建的时候由于需要初始化内存，因此创建channel的时候效率非常非常低，并且受到队列大小的限制，写入的数据不能超过指定的队列大小。

gqueue使用起来比channel更加灵活，不仅创建效率高，不受队列大小限制(当然也可以指定大小)，并且可以像操作双向链表那样执行队列头尾操作。从基准测试结果中也可以看得到，相比较channel，这些灵活性都是靠牺牲了一定的效率来实现的。不过相比较于channel，gqueue的push&pop效率也是相当得优异！


>[danger] # gchan

优雅的Channel操作.

```go
type Chan
    func New(limit int) *Chan
    func (q *Chan) Close()
    func (q *Chan) Pop() interface{}
    func (q *Chan) Push(v interface{}) error
    func (q *Chan) Size() int
```
原生的channel操作在channel关闭后再向channel发送数据或者多次关闭channel会引发panic，gchan包使得channel的操作变得更加优雅，当然，这一部分优雅是需要牺牲一部分的操作性能来实现的。

gchan与原生channel的性能测试：
```
john@johnstation:~/Workspace/Go/GOPATH/src/gitee.com/johng/gf/g/container/gchan$ go test *.go -bench=".*"
goos: linux
goarch: amd64
BenchmarkGqueuePushAndPop-8    	20000000	        71.9 ns/op
BenchmarkChannelPushAndPop-8   	50000000	        39.3 ns/op
PASS
ok  	command-line-arguments	3.663s
```

